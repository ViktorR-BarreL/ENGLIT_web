<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENGLIT - Изучение английского</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Экран входа (без изменений) -->
    <div id="login-screen">
        <h1>Добро пожаловать в ENGLIT!</h1>
        <p>Войдите, чтобы начать изучение слов.</p>
        <button id="loginBtn">Войти через Google</button>
    </div>

    <!-- Основной контент приложения (скрыт до входа) -->
    <div id="app-content" style="display: none;">
        <!-- НОВЫЙ БЛОК: Главное окно по макету -->
        <div class="main-layout">
            <header class="app-header">
                <h1 class="app-title">ENGLIT</h1>
                <div class="user-profile-circle" id="userProfileCircle">
                    <!-- Здесь будет аватар или иконка пользователя -->
                </div>
                <!-- user-info перемещен сюда для отображения в круге при необходимости -->
                <div id="user-info" style="display: none;">
                    <p>Вы вошли как: <span id="userName"></span></p>
                    <button id="logoutBtn">Выйти</button>
                </div>
            </header>

            <div class="main-content-area">
                <div class="left-panel">
                    <div class="category-selection">
                        <input type="text" id="selectedCategoryDisplay" placeholder="Категория слов" readonly>
                        <button id="selectCategoryBtn">выбрать категорию</button>
                    </div>

                    <div class="main-buttons-grid">
                        <button class="action-button" id="learnNewWordsBtn">Изучить новые слова</button>
                        <button class="action-button" id="repeatWordsBtn">Повторение слов</button>
                        <button class="action-button" id="dictionaryBtn">Словарь</button>
                        <button class="action-button" id="myWordsBtn">Свои слова</button>
                    </div>
                </div>

                <div class="right-panel">
                    <h3 class="statistics-title">Статистика</h3>
                    <div class="statistics-content">
                        <!-- Здесь будет отображаться статистика -->
                        <p>Изучено: 0</p>
                        <p>На изучении: 0</p>
                        <p>Повторений сегодня: 0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- НОВЫЙ БЛОК: Модальное окно выбора категорий -->
        <div id="categoryModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Выбор категории слов</h2>
                    <span class="close-button">&times;</span>
                </div>
                <div id="categoryGrid" class="category-grid">
                    <!-- Категории будут загружены сюда из JS -->
                </div>
            </div>
        </div>

        <!-- Админ-панель и Словарь пока скрыты -->
        <div id="admin-panel" style="display: none;">
            <h2>Панель Администратора</h2>
            <div class="admin-forms">
                <form id="add-category-form">
                    <h3>Добавить категорию</h3>
                    <input type="text" id="category-id" placeholder="ID (например, networking)" required>
                    <input type="text" id="category-name" placeholder="Название (например, Сети)" required>
                    <textarea id="category-desc" placeholder="Описание категории"></textarea>
                    <button type="submit">Добавить категорию</button>
                </form>
                <form id="add-word-form">
                    <h3>Добавить слово</h3>
                    <input type="text" id="word-en" placeholder="Слово (анг.)" required>
                    <input type="text" id="word-ru" placeholder="Перевод" required>
                    <input type="text" id="word-transcription" placeholder="Транскрипция">
                    <textarea id="word-example" placeholder="Пример использования"></textarea>
                    <input type="text" id="word-audio" placeholder="URL аудиофайла">
                    <select id="word-category-select" required>
                        <option value="" disabled selected>Выберите категорию...</option>
                    </select>
                    <button type="submit">Добавить слово</button>
                </form>
            </div>
            <hr>
        </div>

        <div class="dictionary-columns" style="display: none;">
            <h2>Словарь</h2>
            <div class="word-column">
                <h3>Новые</h3>
                <div id="new-words-container" class="words-container"></div>
            </div>
            <div class="word-column">
                <h3>Изучаю</h3>
                <div id="learning-words-container" class="words-container"></div>
            </div>
            <div class="word-column">
                <h3>Изучено</h3>
                <div id="learned-words-container" class="words-container"></div>
            </div>
        </div>
    </div>

    <!-- Скрипт подключения Firebase (он уже правильный) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, doc, addDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAmB_8mAwRyMyPuS37hM3jZxM3zwXYThgY",
            authDomain: "englit-999d9.firebaseapp.com",
            projectId: "englit-999d9",
            storageBucket: "englit-999d9.appspot.com",
            messagingSenderId: "360161037435",
            appId: "1:360161037435:web:fb4d86261183b7fe0aa6de",
            measurementId: "G-RSJPH1B9QY"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.db = db;
        window.collection = collection;
        window.doc = doc;
        window.addDoc = addDoc;
        window.setDoc = setDoc;
        window.auth = auth;
        window.GoogleAuthProvider = GoogleAuthProvider;
        window.signInWithPopup = signInWithPopup;
        window.signOut = signOut;
        window.onAuthStateChanged = onAuthStateChanged;
    </script>
    
    <script src="script.js" defer></script>
</body>
</html>